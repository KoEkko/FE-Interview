# 性能优化

现在的性能优化方案很多，但是我们不能盲目的去做很多的性能优化工作，这样会耗费很多时间和精力，最后可能还会白费工夫，所以我们需要根据一个标准和目标来规划好性能优化的方案  
业内普遍会采用 Core Web Vitals 标准来作为参考，其中有三项指标是需要我们额外去关注的  
- Largest Contentful Paint(LCP): 衡量加载体验：为了提供良好的用户体验，LCP应该在页面首次开始加载后的2.5秒内发生
- Fisrst Input Delay(FID): 衡量可交互性，为了提供良好的用户体验，页面的FID 应当小于100毫秒
- Cumulative Layout Shift(CLS):衡量视觉稳定性，为了提供良好的用户体验，页面的CLS应保持小于0.1

有了标准以后，我们再进行性能检测，确认我们项目中最需要优化的地方  
性能检测的方式有以下几种：  
- lightouse
- performance API检测
- 控制台devtools
- node侧：ab压力测试端口+node --prof 启动会创建log日志 之后 使用 node --prof-process 生成耗时日志  

从输入url到看到页面的过程中，会经历：  
1. 浏览器对输入的地址进行url解析
2. 缓存解析，如浏览器缓存，系统缓存，路由器缓存等
3. 通过DNS服务器将主机域名转换为IP地址
4. 根据IP地址找到对应的服务器，发起TCP连接
5. 建立TCP链接,发起HTTP请求
6. 服务器响应HTTP请求，浏览器获得HTML代码
7. 浏览器解析HTML代码，再请求代码中的资源，如css，js，图片等
8. 浏览器解析渲染试图页面
9. 服务器断开TCP链接

关键词：URL解析,DNS解析,HTTP协议,HTTP缓存,TCP连接,服务器，响应体，渲染，根据这些关键词产出性能优化策略  

所以我们需要更快的网络传输，更快的数据处理，更快的渲染页面

## 更快的网络传输

1. DNS预解析，将link标签的rel属性改成**dns-prefetch**，可以提前获取域名的ip地址

2. 使用缓存，减轻服务端压力，快速得到数据

3. 使用CDN

4. 压缩响应，压缩组件通过减少HTTP请求的响应包的大小，从而降低传输时间的方式来提高性能


## 更快的数据处理



## 更快的渲染页面

webkit的渲染流程  
1. 解析HTML，形成DOM树
2. 解析CSS，形成CSSOM树
3. DOM树和CSSOM树构成渲染树render tree
4. 根据render tree来布局，计算每个节点的位置
5. 调用GPU绘制,合成图层，渲染页面



# 白屏优化